<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>AsyncAccount - bold360 Android SDK</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>AsyncAccount | bold360 Android SDK</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="AsyncAccount" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/docs/chat-configuration/setting-account/async-account" /> <meta property="og:url" content="http://localhost:4000/docs/chat-configuration/setting-account/async-account" /> <meta property="og:site_name" content="bold360 Android SDK" /> <script type="application/ld+json"> {"headline":"AsyncAccount","url":"http://localhost:4000/docs/chat-configuration/setting-account/async-account","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> bold360 Android SDK </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/docs/overview.html" class="nav-list-link">Overview</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/quick_start.html" class="nav-list-link">Quick Start</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/chat-configuration" class="nav-list-link">Chat Configuration</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/docs/chat-configuration/setting-account/" class="nav-list-link">Setting Account</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/chat-configuration/chat-settings" class="nav-list-link">Chat Settings</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/chat-configuration/ui-customization" class="nav-list-link">UI Customization</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/incoming-message/" class="nav-list-link">Incoming message</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/outgoing-message/" class="nav-list-link">Outgoing message</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/system-message" class="nav-list-link">System Message</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/chat-bar" class="nav-list-link">Chat Bar</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/queue-bar" class="nav-list-link">Queue Bar</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/agent_typing_indication/" class="nav-list-link">Agent Typing Indication</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/date_and_time/" class="nav-list-link">Datestamp</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/overriding-resources" class="nav-list-link">Overriding Resources</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/ui-customization/overriding-resources/#dark-mode" class="nav-list-link">Dark Mode</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/chat-configuration/tracking-events/" class="nav-list-link">Tracking Events</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/tracking-events/chat-lifecycle" class="nav-list-link">Chat Lifecycle</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/tracking-events/chat-availability" class="nav-list-link">Chat Availability</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/tracking-events/events-and-notifications" class="nav-list-link">Events and Notifications</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/chat-configuration/tracking-events/user-tracking" class="nav-list-link">User Tracking</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/advanced-topics/" class="nav-list-link">Advanced Topics</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/history" class="nav-list-link">Chat History</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/chat-continuity" class="nav-list-link">Chat Continuity</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/chat-restore" class="nav-list-link">Chat Restoring</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/messages-injection" class="nav-list-link">Messages Injection</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/messaging-chat" class="nav-list-link">Messaging Chat</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/voice" class="nav-list-link">Voice</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/advanced-topics/autocomplete/" class="nav-list-link">Autocomplete</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/docs/advanced-topics/autocomplete/in-chat" class="nav-list-link">In chat</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/advanced-topics/autocomplete/standalone" class="nav-list-link">Standalone</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/advanced-topics/feedback/" class="nav-list-link">Feedback</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/docs/advanced-topics/feedback/instant-feedback" class="nav-list-link">Instant Feedback</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/docs/advanced-topics/feedback/timed-feedback" class="nav-list-link">Timed Feedback</a> </li></ul></li><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/file-upload" class="nav-list-link">File Upload</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/advanced-topics/handover" class="nav-list-link">Handover</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/docs/release-notes.html" class="nav-list-link">Release Notes</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/faq/" class="nav-list-link">FAQ</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/faq/tls12" class="nav-list-link">TLS 1.2</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search bold360 Android SDK" aria-label="Search bold360 Android SDK" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/chat-configuration">Chat Configuration</a></li> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/chat-configuration/setting-account/">Setting Account</a></li> <li class="breadcrumb-nav-list-item"><span>AsyncAccount</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="asyncaccount"> <a href="#asyncaccount" class="anchor-heading" aria-labelledby="asyncaccount"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AsyncAccount </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#configure-chat-session" id="markdown-toc-configure-chat-session">Configure chat session</a> <ol> <li><a href="#configure-user-info" id="markdown-toc-configure-user-info">Configure user info</a></li> </ol> </li> <li><a href="#how-to" id="markdown-toc-how-to">How to</a> <ol> <li><a href="#start-a-chat-session-that-will-relate-to-the-same-user" id="markdown-toc-start-a-chat-session-that-will-relate-to-the-same-user">Start a chat session that will relate to the same user</a></li> <li><a href="#get-messages-that-were-sent-while-the-user-was-off" id="markdown-toc-get-messages-that-were-sent-while-the-user-was-off">Get messages that were sent while the user was off.</a></li> <li><a href="#continue-chat-on-an-opennew-chat-window" id="markdown-toc-continue-chat-on-an-opennew-chat-window">Continue chat on an open/new chat window</a></li> </ol> </li> <li><a href="#account-updates" id="markdown-toc-account-updates">Account updates</a></li> </ol><hr /> <p>Use this account to create messaging chat sessions.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">account</span> <span class="p">=</span> <span class="nc">AsyncAccount</span><span class="p">(</span><span class="nc">API_KEY</span><span class="p">,</span> <span class="nc">APPLICATION_ID</span><span class="p">)</span>
</code></pre></div></div> <h2 id="configure-chat-session"> <a href="#configure-chat-session" class="anchor-heading" aria-labelledby="configure-chat-session"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configure chat session </h2> <p>In order to create messaging chat, a valid apiKey and applicationId are required.</p> <ul> <li> <p><strong>applicationId <sub>[mandatory]</sub></strong> - An id that was created by bold administration to your account. The applicationId can be provided on account creation or later set on the session info property.<br /> <code class="language-plaintext highlighter-rouge">account.info.applicationId = APPLICATION_ID</code></p> </li> <li> <p><strong>userInfo <sub>[optional]</sub></strong> - Defines the user that this chat relates to. Uses for relating chat sessions to a specific user, and to provide some user details to be viewed by the chat accepting agent.</p> <h3 id="configure-user-info"> <a href="#configure-user-info" class="anchor-heading" aria-labelledby="configure-user-info"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configure user info </h3> <p>By default, the account is created with a new UserInfo and an automatically generated userId.</p> <ul> <li> <p><a id="relate"></a> <strong>In order to relate chat sessions to a specific user</strong>, set a UserInfo object with the specific user, userId value, to the account. <code class="language-plaintext highlighter-rouge">account.info.userInfo = UserInfo(USER_ID)</code></p> </li> <li> <p><strong>In order to provide user details</strong>, such as first/last name, email etc, you can provide them on your created UserInfo object or access the default created one.</p> </li> </ul> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">account</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">userInfo</span> <span class="p">=</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="nc">USER_ID</span><span class="p">).</span><span class="nf">apply</span><span class="p">{</span>
      <span class="n">firstName</span> <span class="p">=</span> <span class="nc">FIRST_NAME</span> <span class="c1">// optional</span>
      <span class="n">lastName</span> <span class="p">=</span> <span class="nc">LAST_NAME</span> <span class="c1">// optional</span>
      <span class="n">email</span> <span class="p">=</span> <span class="nc">EMAIL_ADDRESS</span> <span class="c1">// optional</span>
      <span class="n">phoneNumber</span> <span class="p">=</span> <span class="nc">PHONE_NUMBER</span> <span class="c1">// optional</span>
  <span class="p">}</span>

  <span class="c1">// OR</span>

  <span class="n">account</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">userInfo</span><span class="p">.</span><span class="nf">apply</span><span class="p">{</span>
      <span class="n">firstName</span> <span class="p">=</span> <span class="s">"..."</span>
      <span class="n">email</span> <span class="p">=</span> <span class="s">"..."</span> 
      <span class="o">..</span><span class="p">.</span>  
  <span class="p">}</span>
</code></pre></div> </div> </li> <li> <p><strong>SenderId <sub>[optional]</sub></strong> - Chat session id. Should be used to fetch messages that were sent to the user from the agent, on that chat session, while the user was off.</p> </li> <li> <p><strong>ShouldStartNewChat <sub>[optional]</sub></strong> - Defines if a previous chat window, on agent workspace, should be used, for this session, if still open.</p> </li> <li> <p><strong>LastReceivedMessageId <sub>[optional]</sub></strong> - Defines the last message that was viewed by the user, in order to fetch missed messages from this point on. If not provided, will fetch messages from session start.</p> </li> </ul><hr /> <h2 id="how-to"> <a href="#how-to" class="anchor-heading" aria-labelledby="how-to"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to </h2> <ul> <li> <h3 id="start-a-chat-session-that-will-relate-to-the-same-user"> <a href="#start-a-chat-session-that-will-relate-to-the-same-user" class="anchor-heading" aria-labelledby="start-a-chat-session-that-will-relate-to-the-same-user"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Start a chat session that will <a href="#relate">relate to the same user</a> </h3> </li> <li> <h3 id="get-messages-that-were-sent-while-the-user-was-off"> <a href="#get-messages-that-were-sent-while-the-user-was-off" class="anchor-heading" aria-labelledby="get-messages-that-were-sent-while-the-user-was-off"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get messages that were sent while the user was off. </h3> <ol> <li><a href="#configure-user-info">Configure the session UserInfo</a> with the specific user id.</li> <li>Configure the <code class="language-plaintext highlighter-rouge">SenderId</code> with the id of the session that the messages were sent on.</li> <li>Configure <code class="language-plaintext highlighter-rouge">LastReceivedMessageId</code> with the last agent message that was viewed by the user, in order to get only the relevant messages. The users missed messages will be fetched from the previous session, if has any.</li> </ol> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">account</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="nf">apply</span><span class="p">{</span>
      <span class="n">account</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">userInfo</span> <span class="p">=</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="nc">USER_ID</span><span class="p">)</span>
      <span class="nc">SenderId</span> <span class="p">=</span> <span class="nc">PREVIOUS_SESSION_ID</span>
      <span class="nc">LastReceivedMessageId</span> <span class="p">=</span> <span class="nc">LAST_AGENT_MESSAGE_ID</span>
  <span class="p">}</span>
</code></pre></div> </div> </li> <li> <h3 id="continue-chat-on-an-opennew-chat-window"> <a href="#continue-chat-on-an-opennew-chat-window" class="anchor-heading" aria-labelledby="continue-chat-on-an-opennew-chat-window"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Continue chat on an open/new chat window </h3> <ol> <li>Configure <code class="language-plaintext highlighter-rouge">UserInfo</code> and <code class="language-plaintext highlighter-rouge">SenderId</code> and <code class="language-plaintext highlighter-rouge">LastReceivedMessageId</code> as mentioned before.</li> <li>Configure <code class="language-plaintext highlighter-rouge">ShouldStartNewChat</code> to <code class="language-plaintext highlighter-rouge">false</code> to use an open chat window otherwise set to <code class="language-plaintext highlighter-rouge">true</code></li> </ol> <p>If the previous session chat was closed by the user or the agent, a new chat window will be created with a new SenderId, no matter what was configured on <code class="language-plaintext highlighter-rouge">ShouldStartNewChat</code>. The users missed messages will be fetched from the previous session.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">account</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="nf">apply</span><span class="p">{</span>
      <span class="n">account</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">userInfo</span> <span class="p">=</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="nc">USER_ID</span><span class="p">)</span>
      <span class="nc">SenderId</span> <span class="p">=</span> <span class="nc">PREVIOUS_SESSION_ID</span>
      <span class="nc">LastReceivedMessageId</span> <span class="p">=</span> <span class="nc">LAST_AGENT_MESSAGE_ID</span>
      <span class="nc">ShouldStartNewChat</span> <span class="p">=</span> <span class="k">false</span><span class="p">/</span><span class="k">true</span>
  <span class="p">}</span>
</code></pre></div> </div> </li> </ul><hr /> <h2 id="account-updates"> <a href="#account-updates" class="anchor-heading" aria-labelledby="account-updates"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Account updates </h2> <ul> <li> <p>Once the chat session was created, an account update will be triggered on your <a href="/docs/chat-configuration/setting-account/account-info-provider"><code class="language-plaintext highlighter-rouge">AccountInfoProvider</code></a> implementation.<br /> From the updated account you can fetch the <code class="language-plaintext highlighter-rouge">SenderId</code>, and be synced with the last created sesion id. <code class="language-plaintext highlighter-rouge">account.info.SenderId</code></p> </li> <li> <p>In order to get updates for <code class="language-plaintext highlighter-rouge">LastReceivedMessageId</code>, implement <a href="/docs/chat-configuration/setting-account/account-info-provider#ongoing-session-configurations-changes"><code class="language-plaintext highlighter-rouge">AccountSessionListener</code></a> instead.</p> </li> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
